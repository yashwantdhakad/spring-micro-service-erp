<mat-card class="mat-elevation-z10">
  <mat-card-header>
    <mat-card-title>Create Shipment</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="shipmentForm" (ngSubmit)="createShipment()">
      <div fxLayout="row wrap" fxLayout.xs="column" fxLayoutGap="16px">
        <mat-form-field fxFlex.gt-xs="30%" appearance="outline">
          <mat-label>Shipment ID (optional)</mat-label>
          <input matInput formControlName="shipmentId" />
        </mat-form-field>
        <mat-form-field fxFlex.gt-xs="30%" appearance="outline">
          <mat-label>Shipment Type</mat-label>
          <input matInput formControlName="shipmentTypeId" required />
        </mat-form-field>
        <mat-form-field fxFlex.gt-xs="30%" appearance="outline">
          <mat-label>Status</mat-label>
          <input matInput formControlName="statusId" required />
        </mat-form-field>
        <mat-form-field fxFlex.gt-xs="30%" appearance="outline">
          <mat-label>Primary Order</mat-label>
          <input matInput formControlName="primaryOrderId" />
        </mat-form-field>
        <mat-form-field fxFlex.gt-xs="30%" appearance="outline">
          <mat-label>Origin Facility</mat-label>
          <input matInput formControlName="originFacilityId" />
        </mat-form-field>
        <mat-form-field fxFlex.gt-xs="30%" appearance="outline">
          <mat-label>Destination Facility</mat-label>
          <input matInput formControlName="destinationFacilityId" />
        </mat-form-field>
        <mat-form-field fxFlex.gt-xs="30%" appearance="outline">
          <mat-label>From Party</mat-label>
          <input matInput formControlName="partyIdFrom" />
        </mat-form-field>
        <mat-form-field fxFlex.gt-xs="30%" appearance="outline">
          <mat-label>To Party</mat-label>
          <input matInput formControlName="partyIdTo" />
        </mat-form-field>
        <mat-form-field fxFlex.gt-xs="30%" appearance="outline">
          <mat-label>Estimated Ship Date</mat-label>
          <input matInput type="date" formControlName="estimatedShipDate" />
        </mat-form-field>
        <mat-form-field fxFlex.gt-xs="30%" appearance="outline">
          <mat-label>Estimated Arrival Date</mat-label>
          <input matInput type="date" formControlName="estimatedArrivalDate" />
        </mat-form-field>
      </div>

      <mat-divider class="section-divider"></mat-divider>
      <div class="section-header">
        <h3>Items</h3>
        <button mat-stroked-button type="button" (click)="addItem()">
          Add Item
        </button>
      </div>
      <div formArrayName="items">
        <div
          *ngFor="let item of items.controls; let i = index"
          [formGroupName]="i"
          class="form-row"
        >
          <mat-form-field appearance="outline">
            <mat-label>Item Seq ID</mat-label>
            <input matInput formControlName="shipmentItemSeqId" />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Product ID</mat-label>
            <input matInput formControlName="productId" required />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Quantity</mat-label>
            <input matInput formControlName="quantity" required />
          </mat-form-field>
          <mat-form-field appearance="outline" class="wide-field">
            <mat-label>Description</mat-label>
            <input matInput formControlName="shipmentContentDescription" />
          </mat-form-field>
          <button
            mat-icon-button
            type="button"
            aria-label="Remove item"
            (click)="removeItem(i)"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>

      <mat-divider class="section-divider"></mat-divider>
      <div class="section-header">
        <h3>Route Segments</h3>
        <button mat-stroked-button type="button" (click)="addRouteSegment()">
          Add Route Segment
        </button>
      </div>
      <div formArrayName="routeSegments">
        <div
          *ngFor="let segment of routeSegments.controls; let i = index"
          [formGroupName]="i"
          class="form-row"
        >
          <mat-form-field appearance="outline">
            <mat-label>Route Segment ID</mat-label>
            <input matInput formControlName="shipmentRouteSegmentId" />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Origin Facility</mat-label>
            <input matInput formControlName="originFacilityId" />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Destination Facility</mat-label>
            <input matInput formControlName="destFacilityId" />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Method</mat-label>
            <input matInput formControlName="shipmentMethodTypeId" />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Carrier</mat-label>
            <input matInput formControlName="carrierPartyId" />
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Status</mat-label>
            <input matInput formControlName="carrierServiceStatusId" />
          </mat-form-field>
          <button
            mat-icon-button
            type="button"
            aria-label="Remove route segment"
            (click)="removeRouteSegment(i)"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>

      <div class="actions">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="isLoading"
        >
          Create Shipment
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
