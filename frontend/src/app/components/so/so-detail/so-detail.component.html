<ng-container *ngIf="isLoading; else content">
  <mat-progress-spinner [diameter]="100" mode="indeterminate" color="primary"></mat-progress-spinner>
</ng-container>
<ng-template #content>
  <mat-list>
    <mat-list-item>
      <a [routerLink]="['/orders']">{{ 'SO.TITLE' | translate }}</a>
      / {{ orderHeader?.orderId }}
    </mat-list-item>
  </mat-list>
  <div fxLayout="row wrap" fxLayout.xs="column" fxLayoutGap="16px">
    <mat-card class="mat-elevation-z10 so-overview-card" fxFlex.gt-xs="48%">
      <mat-card-header fxLayout="row" fxLayoutAlign="space-between center">
        <mat-card-title>{{ 'COMMON.OVERVIEW' | translate }}</mat-card-title>
        <div fxLayout="row" fxLayoutGap="12px">
          <button mat-icon-button color="primary" (click)="openPdf()" aria-label="Open PDF">
            <mat-icon>picture_as_pdf</mat-icon>
          </button>


          <ng-container *ngIf="validStatusChanges.length">
            <div class="split-btn-group">
              <button mat-raised-button color="primary" [class.split-btn-primary]="validStatusChanges.length > 1"
                (click)="changeOrderStatus(validStatusChanges[0].statusIdTo)">
                {{ validStatusChanges[0].transitionName || validStatusChanges[0].description ||
                validStatusChanges[0].statusIdTo }}
              </button>
              <button mat-raised-button color="primary" class="split-btn-dropdown" [matMenuTriggerFor]="statusMenu"
                *ngIf="validStatusChanges.length > 1">
                <mat-icon>arrow_drop_down</mat-icon>
              </button>
            </div>

            <mat-menu #statusMenu="matMenu">
              <ng-container *ngFor="let change of validStatusChanges; let i = index">
                <button mat-menu-item *ngIf="i > 0" (click)="changeOrderStatus(change.statusIdTo)">
                  {{ change.transitionName || change.description || change.statusIdTo }}
                </button>
              </ng-container>
            </mat-menu>
          </ng-container>

          <button mat-raised-button color="primary" *ngIf="canApprove && !validStatusChanges.length"
            (click)="approveOrder()">
            {{ 'COMMON.APPROVE' | translate }}
          </button>
          <button mat-raised-button color="accent" *ngIf="canPicklist" (click)="createPicklist()">
            Create Picklist
          </button>
        </div>
      </mat-card-header>
      <mat-card-content>
        <div class="so-overview-list">
          <div class="so-overview-row" *ngFor="let field of overviewFields">
            <span class="so-overview-label">{{ field.label | translate }}:</span>
            <span class="so-overview-value">{{ field.value }}</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
    <mat-card class="mat-elevation-z10 so-summary-card" fxFlex.gt-xs="48%">
      <mat-card-header>
        <mat-card-title>{{ 'SO.AMOUNT_SUMMARY' | translate }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="so-summary-list">
          <div class="so-summary-row">
            <span class="so-summary-label">{{ 'SO.SUBTOTAL' | translate }}:</span>
            <span class="so-summary-value">{{ itemSubtotal | currency : orderHeader?.currencyUomId }}</span>
          </div>
          <div class="so-summary-row">
            <span class="so-summary-label">{{ 'SO.SHIPPING_AMOUNT' | translate }}:</span>
            <span class="so-summary-value">{{ shippingTotal | currency : orderHeader?.currencyUomId }}</span>
          </div>
          <div class="so-summary-row">
            <span class="so-summary-label">{{ 'SO.DISCOUNT_AMOUNT' | translate }}:</span>
            <span class="so-summary-value">{{ discountTotal | currency : orderHeader?.currencyUomId }}</span>
          </div>
          <div class="so-summary-row">
            <span class="so-summary-label">{{ 'SO.TOTAL' | translate }}:</span>
            <span class="so-summary-value">{{ orderTotal | currency : orderHeader?.currencyUomId }}</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
  <br />
  <mat-card class="mat-elevation-z10">
    <mat-card-header>
      <mat-card-title>{{ 'SO.PAYMENT_TERMS_PREFERENCES' | translate }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div fxLayout="row wrap" fxLayout.xs="column">
        <mat-card fxFlex.gt-xs="48%" class="card-margin mat-elevation-z10">
          <mat-card-header>
            <mat-card-title>{{ 'SO.PAYMENT_TERMS' | translate }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <table mat-table [dataSource]="orderTerms">
              <ng-container matColumnDef="termTypeId">
                <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'SO.PAYMENT_TERM' | translate }}</th>
                <td mat-cell class="text-left" *matCellDef="let term">
                  {{ term?.description || term?.termTypeId }}
                </td>
              </ng-container>
              <ng-container matColumnDef="termValue">
                <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'SO.RATE' | translate }}</th>
                <td mat-cell class="text-left" *matCellDef="let term">
                  {{ term?.termValue || '-' }}
                </td>
              </ng-container>
              <ng-container matColumnDef="termDays">
                <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'SO.DAYS' | translate }}</th>
                <td mat-cell class="text-left" *matCellDef="let term">
                  {{ term?.termDays || '-' }}
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="termColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: termColumns"></tr>
              <tr *ngIf="!orderTerms.length">
                <td class="text-left" colspan="3">{{ 'COMMON.NOT_AVAILABLE' | translate }}</td>
              </tr>
            </table>
          </mat-card-content>
        </mat-card>

        <mat-card fxFlex.gt-xs="48%" class="card-margin mat-elevation-z10">
          <mat-card-header>
            <mat-card-title>{{ 'SO.PAYMENT_PREFERENCES' | translate }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <table mat-table [dataSource]="orderPaymentPreferences">
              <ng-container matColumnDef="paymentMethodTypeId">
                <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'SO.PAYMENT_METHOD' | translate }}</th>
                <td mat-cell class="text-left" *matCellDef="let pref">
                  {{ pref?.paymentMethodTypeId || '-' }}
                </td>
              </ng-container>
              <ng-container matColumnDef="statusId">
                <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.STATUS' | translate }}</th>
                <td mat-cell class="text-left" *matCellDef="let pref">
                  {{ pref?.statusId || '-' }}
                </td>
              </ng-container>
              <ng-container matColumnDef="maxAmount">
                <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'SO.AMOUNT' | translate }}</th>
                <td mat-cell class="text-left" *matCellDef="let pref">
                  {{ pref?.maxAmount || '-' }}
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="preferenceColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: preferenceColumns"></tr>
              <tr *ngIf="!orderPaymentPreferences.length">
                <td class="text-left" colspan="3">{{ 'COMMON.NOT_AVAILABLE' | translate }}</td>
              </tr>
            </table>
          </mat-card-content>
        </mat-card>
      </div>
    </mat-card-content>
  </mat-card>
  <br />
  <mat-card class="mat-elevation-z10">
    <mat-card-header>
      <mat-card-title>{{ 'COMMON.NOTES' | translate }}
        <mat-icon matListIcon class="custom-mat-icon custom-icon-align" color="primary"
          (click)="addUpdateNoteDialog()">add</mat-icon>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="orderNotes">
        <ng-container matColumnDef="noteText">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.NOTE' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            <span *ngIf="item.noteText">{{ item?.noteText }}</span>
          </td>
        </ng-container>
        <ng-container matColumnDef="noteDate">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.DATE' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            {{ item.noteDate | date : "MMMM d, y" }}
          </td>
        </ng-container>
        <ng-container matColumnDef="userId">
          <th mat-header-cell class="text-left" *matHeaderCellDef>
            {{ 'SO.CREATED_BY' | translate }}
          </th>
          <td mat-cell class="text-left" *matCellDef="let item">
            {{ item.userId }}
          </td>
        </ng-container>
        <ng-container matColumnDef="action">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.ACTION' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            <mat-icon matListIcon class="custom-mat-icon custom-icon-align" color="primary"
              (click)="addUpdateNoteDialog(item)">edit</mat-icon>
            <mat-icon matListIcon class="custom-mat-icon custom-icon-align" color="warn"
              (click)="deleteNote(item)">delete</mat-icon>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="noteColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: noteColumns"></tr>
      </table>
    </mat-card-content>
  </mat-card>
  <br />
  <mat-card *ngFor="let part of parts">
    <mat-card-header>
      <mat-card-title>{{ 'SO.PARTS' | translate }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div fxLayout="row wrap" fxLayout.xs="column">
        <mat-card fxFlex.gt-xs="32%" class="card-margin mat-elevation-z10">
          <mat-card-header>
            <mat-card-title>{{ 'SO.PART_DETAILS' | translate }}:</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <ul class="custom-list">
              <li class="custom-list-item">
                <strong>{{ 'SO.PART_NO' | translate }}:</strong> {{ part.orderPartSeqId }}
              </li>
              <li class="custom-list-item">
                <strong>{{ 'SO.PART_STATUS' | translate }}:</strong> {{ part?.status?.description }}
              </li>
              <li class="custom-list-item">
                <strong>{{ 'SO.PHONE_NO' | translate }}:</strong>
                {{ part?.telecom?.telecomNumber?.countryCode }}
                {{ part?.telecom?.telecomNumber?.areaCode }}
                {{ part?.telecom?.telecomNumber?.contactNumber }}
              </li>
              <li class="custom-list-item">
                <strong>{{ 'SO.SHIP_BEFORE_DATE' | translate }}:</strong>
                {{ part?.shipBeforeDate | date : "MMMM d, y" }}
              </li>
              <li class="custom-list-item">
                <strong>{{ 'SO.SHIP_BY' | translate }}:</strong>
                {{ getShipByLabel(part) || '-' }}
              </li>
              <li class="custom-list-item">
                <strong>{{ 'COMMON.SHIPPING_INSTRUCTIONS' | translate }}:</strong>
                {{ part.shippingInstructions }}
                <mat-icon matListIcon class="custom-mat-icon custom-icon-align" color="primary"
                  (click)="editShippingInstructions(part)">edit</mat-icon>
              </li>
              <li class="custom-list-item">
                <strong>{{ 'SO.PART_TOTAL' | translate }}:</strong>
                {{ part?.partTotal | currency : orderHeader?.currencyUomId }}
              </li>
            </ul>
          </mat-card-content>
        </mat-card>
        <mat-card fxFlex.gt-xs="32%" class="card-margin mat-elevation-z10">
          <mat-card-header>
            <mat-card-title>{{ 'SO.SHIP_FROM' | translate }}:</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <ul class="custom-list">
              <li class="custom-list-item">
                <strong>{{ 'COMMON.FACILITY' | translate }}:</strong> {{ part.facility.facilityName }}
              </li>
              <li class="custom-list-item">
                <strong>{{ 'COMMON.ADDRESS' | translate }}:</strong>
                <span *ngIf="facilityAddress || firstPartInfo?.facilityContactInfo">
                  <div>
                    {{
                    facilityAddress?.toName || firstPartInfo?.facilityContactInfo?.postalAddress?.toName
                    }}
                  </div>
                  <div>
                    {{
                    facilityAddress?.address1 || firstPartInfo?.facilityContactInfo?.postalAddress?.address1
                    }}
                  </div>
                  <div>
                    {{
                    facilityAddress?.address2 || firstPartInfo?.facilityContactInfo?.postalAddress?.address2
                    }}
                  </div>
                  <div>
                    {{
                    facilityAddress?.city || firstPartInfo?.facilityContactInfo?.postalAddress?.city
                    }},
                    {{
                    facilityAddress?.stateProvinceGeo?.geoName
                    || firstPartInfo?.facilityContactInfo?.postalAddress?.stateProvinceGeo?.geoName
                    }}
                    {{
                    facilityAddress?.postalCode || firstPartInfo?.facilityContactInfo?.postalAddress?.postalCode
                    }}
                    {{
                    facilityAddress?.countryGeoId || firstPartInfo?.facilityContactInfo?.postalAddress?.countryGeoId
                    }}
                  </div>
                </span>
              </li>
            </ul>
          </mat-card-content>
        </mat-card>
        <mat-card fxFlex.gt-xs="32%" class="card-margin mat-elevation-z10">
          <mat-card-header>
            <mat-card-title>{{ 'SO.SHIP_TO' | translate }}:</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <ul class="custom-list">
              <li class="custom-list-item">
                <strong>Name:</strong>
                <ng-container *ngIf="part?.customer?.person; else organization">
                  {{ part?.customer?.person?.firstName }}
                  {{ part?.customer?.person?.lastName }}
                </ng-container>
                <ng-template #organization>
                  {{ part?.customer?.organization?.organizationName }}
                </ng-template>
              </li>
            </ul>

            <ul class="custom-list" *ngIf="shipToAddresses.length; else noVendorAddress">
              <li class="custom-list-item" *ngFor="let shipToAddress of shipToAddresses">
                <strong>Address:</strong>
                <mat-icon matListIcon class="custom-mat-icon custom-icon-align" color="primary"
                  (click)="editShipToAddress(shipToAddress)">edit</mat-icon>
                <div>{{ shipToAddress?.postalAddress?.toName }}</div>
                <div>{{ shipToAddress?.postalAddress?.address1 }}</div>
                <div>{{ shipToAddress?.postalAddress?.address2 }}</div>
                <div>
                  {{ shipToAddress?.postalAddress?.city }},
                  {{ shipToAddress?.postalAddress?.stateProvinceGeo?.geoName }}
                  {{ shipToAddress?.postalAddress?.postalCode }}
                  {{ shipToAddress?.postalAddress?.countryGeoId }}
                </div>
              </li>
            </ul>
            <ng-template #noVendorAddress>
              <div class="custom-list-item">
                <strong>Address:</strong>
                <mat-icon matListIcon class="custom-mat-icon custom-icon-align" color="primary"
                  (click)="editShipToAddress()">add</mat-icon>
              </div>
            </ng-template>
          </mat-card-content>
        </mat-card>
      </div>
    </mat-card-content>
    <br />
    <mat-card-content>
      <mat-card class="mat-elevation-z10">
        <mat-card-header>
          <mat-card-title>{{ 'COMMON.ITEMS' | translate }}
            <mat-icon matListIcon class="custom-mat-icon custom-icon-align" color="primary"
              (click)="addItemDialog({ orderPartSeqId: part.orderPartSeqId })">add</mat-icon>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <table mat-table [dataSource]="part.items">
            <ng-container matColumnDef="productId">
              <th mat-header-cell class="text-left" *matHeaderCellDef>
                {{ 'SO.PRODUCT_ID' | translate }}
              </th>
              <td mat-cell class="text-left" *matCellDef="let item">
                {{ item.productId }}
              </td>
            </ng-container>
            <ng-container matColumnDef="productName">
              <th mat-header-cell class="text-left" *matHeaderCellDef>
                {{ 'SO.PRODUCT_NAME' | translate }}
              </th>
              <td mat-cell class="text-left" *matCellDef="let item">
                {{ getProductName(item) }}
              </td>
            </ng-container>
            <ng-container matColumnDef="itemDescription">
              <th mat-header-cell class="text-left" *matHeaderCellDef>
                {{ 'SO.ITEM_DESCRIPTION' | translate }}
              </th>
              <td mat-cell class="text-left" *matCellDef="let item">
                {{ item.itemDescription }}
              </td>
            </ng-container>
            <ng-container matColumnDef="description">
              <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.TYPE' | translate }}</th>
              <td mat-cell class="text-left" *matCellDef="let item">
                {{
                getOrderItemTypeDescription(
                item.itemType?.description ||
                item.orderItemTypeId ||
                item.itemTypeEnumId
                )
                }}
              </td>
            </ng-container>
            <ng-container matColumnDef="requiredByDate">
              <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.REQUIRED_BY_DATE' | translate }}</th>
              <td mat-cell class="text-left" *matCellDef="let item">
                {{ item.requiredByDate | date : "MMMM d, y" }}
              </td>
            </ng-container>
            <ng-container matColumnDef="unitAmount">
              <th mat-header-cell class="text-right" *matHeaderCellDef>{{ 'COMMON.UNIT_PRICE' | translate }}</th>
              <td mat-cell class="text-right" *matCellDef="let item">
                {{ item.unitAmount | currency : orderHeader.currencyUomId }}
              </td>
            </ng-container>
            <ng-container matColumnDef="quantity">
              <th mat-header-cell class="text-right" *matHeaderCellDef>{{ 'COMMON.QUANTITY' | translate }}</th>
              <td mat-cell class="text-right" *matCellDef="let item" [style.padding-top.px]="8"
                [style.padding-bottom.px]="8">
                <div class="quantity-column-container">
                  <div class="quantity-row">
                    <span class="quantity-label">{{ 'COMMON.ORDER_QTY' | translate }}:</span>
                    <span class="quantity-value quantity-clickable" (click)="startEditQuantity(item)"
                      *ngIf="!isEditingItem(item)">
                      {{ item.quantity }}
                    </span>
                    <div *ngIf="isEditingItem(item)" class="quantity-edit-container">
                      <input type="number" [(ngModel)]="editingQuantity" class="quantity-input"
                        (keyup.enter)="saveQuantity(item)" (keyup.escape)="cancelEditQuantity()" autofocus />
                      <button mat-icon-button color="primary" (click)="saveQuantity(item)">
                        <mat-icon>check</mat-icon>
                      </button>
                      <button mat-icon-button color="warn" (click)="cancelEditQuantity()">
                        <mat-icon>close</mat-icon>
                      </button>
                    </div>
                  </div>
                  <div class="quantity-row">
                    <span class="quantity-label">{{ 'COMMON.RESERVED_QTY' | translate }}:</span>
                    <span class="quantity-value">{{ item.reservedQuantity || 0 }}</span>
                  </div>
                  <div class="quantity-row">
                    <span class="quantity-label">{{ 'COMMON.SHIPPED_QTY' | translate }}:</span>
                    <span class="quantity-value">{{ item.pickedQuantity || 0 }}</span>
                  </div>
                </div>
              </td>
            </ng-container>
            <ng-container matColumnDef="statusId">
              <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.STATUS' | translate }}</th>
              <td mat-cell class="text-left" *matCellDef="let item">
                {{ item.statusDescription || item.statusId }}
              </td>
            </ng-container>
            <ng-container matColumnDef="totalAmount">
              <th mat-header-cell class="text-right" *matHeaderCellDef>{{ 'COMMON.TOTAL_AMOUNT' | translate }}</th>
              <td mat-cell class="text-right" *matCellDef="let item">
                {{
                item.partTotal
                | currency : orderHeader.currencyUomId
                }}
              </td>
            </ng-container>
            <ng-container matColumnDef="action">
              <th mat-header-cell class="text-center" *matHeaderCellDef>{{ 'COMMON.ACTION' | translate }}</th>
              <td mat-cell class="text-center" *matCellDef="let item">
                <div fxLayout="row" fxLayoutAlign="center center">
                  <button mat-icon-button color="primary" (click)="editItem(item)"
                    *ngIf="canEditItems && item.statusId !== 'ITEM_CANCELLED' && item.statusId !== 'ITEM_COMPLETED'">
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button mat-icon-button color="warn" (click)="cancelItem(item)"
                    *ngIf="canEditItems && item.statusId !== 'ITEM_CANCELLED' && item.statusId !== 'ITEM_COMPLETED'">
                    <mat-icon>cancel</mat-icon>
                  </button>
                </div>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="partColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: partColumns" [ngClass]="getRowClass(row)"></tr>
          </table>
        </mat-card-content>
      </mat-card>
    </mat-card-content>
  </mat-card>
  <br />
  <mat-card class="mat-elevation-z10">
    <mat-card-header>
      <mat-card-title>
        {{ 'SO.CONTENTS' | translate }}
        <mat-icon matListIcon class="custom-mat-icon custom-icon-align" color="primary"
          (click)="addUpdateContentDialog()">add</mat-icon></mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="contents">
        <ng-container matColumnDef="description">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'SO.TITLE_COL' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            {{ item.description }}
          </td>
        </ng-container>
        <ng-container matColumnDef="contentDate">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'SO.CONTENT_COL' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            {{ item.contentDate | date : "MMMM d, y" }}
          </td>
        </ng-container>
        <ng-container matColumnDef="contentLocation">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'SO.MIME_TYPE' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            <ng-container *ngIf="item.contentId; else noContentFile">
              <a href="#" (click)="$event.preventDefault(); openOrderContent(item)">
                {{ item.contentLocation }}
              </a>
            </ng-container>
            <ng-template #noContentFile>--</ng-template>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="contentColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: contentColumns"></tr>
      </table>
    </mat-card-content>
  </mat-card>
  <br />
  <mat-card class="mat-elevation-z10">
    <mat-card-header>
      <mat-card-title>{{ 'SHIPMENT.TITLE' | translate }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="shipments">
        <ng-container matColumnDef="shipmentId">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'SHIPMENT.ID_LABEL' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            <a [routerLink]="['/shipments', item.shipmentId]">{{ item.shipmentId }}</a>
          </td>
        </ng-container>
        <ng-container matColumnDef="shipmentTypeId">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'SHIPMENT.TYPE' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            {{ getShipmentTypeDescription(item.shipmentTypeId) }}
          </td>
        </ng-container>
        <ng-container matColumnDef="statusId">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.STATUS' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            {{ getStatusDescription(item.statusId) }}
          </td>
        </ng-container>
        <ng-container matColumnDef="createdDate">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'SHIPMENT.CREATED_DATE' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            {{ item.createdDate | date : "MMMM d, y" }}
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="shipmentColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: shipmentColumns"></tr>
      </table>
    </mat-card-content>
  </mat-card>
  <br />
  <mat-card class="mat-elevation-z10">
    <mat-card-header>
      <mat-card-title>{{ 'COMMON.INVOICES' | translate }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="invoiceItems">
        <ng-container matColumnDef="invoiceId">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.INVOICE' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">{{ item.invoiceId }}</td>
        </ng-container>
        <ng-container matColumnDef="productId">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.PRODUCT' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">{{ item.productId }}</td>
        </ng-container>
        <ng-container matColumnDef="quantity">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.QTY' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">{{ item.quantity }}</td>
        </ng-container>
        <ng-container matColumnDef="amount">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.AMOUNT' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            {{ item.amount | currency : (item.currencyUomId || orderHeader?.currencyUomId) }}
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="invoiceColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: invoiceColumns"></tr>
      </table>
    </mat-card-content>
  </mat-card>
  <br />
  <mat-card class="mat-elevation-z10">
    <mat-card-header>
      <mat-card-title>{{ 'COMMON.PICKLISTS' | translate }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="picklists">
        <ng-container matColumnDef="picklistId">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.PICKLIST' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">{{ item.picklistId }}</td>
        </ng-container>
        <ng-container matColumnDef="statusId">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.STATUS' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            {{ getStatusDescription(item.statusId) }}
          </td>
        </ng-container>
        <ng-container matColumnDef="shipmentId">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.SHIPMENT' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            <a *ngIf="item.shipmentId" [routerLink]="['/shipments', item.shipmentId]">
              {{ item.shipmentId }}
            </a>
          </td>
        </ng-container>
        <ng-container matColumnDef="createdDate">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.CREATED' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            {{ item.createdDate | date : "MMMM d, y" }}
          </td>
        </ng-container>
        <ng-container matColumnDef="action">
          <th mat-header-cell class="text-left" *matHeaderCellDef>{{ 'COMMON.ACTION' | translate }}</th>
          <td mat-cell class="text-left" *matCellDef="let item">
            <button mat-button color="primary" *ngIf="item.statusId !== 'PICKLIST_PICKED'"
              (click)="markPicklistPicked(item.picklistId)">
              {{ 'COMMON.MARK_PICKED' | translate }}
            </button>
            <button mat-button color="accent"
              *ngIf="item.shipmentId && getShipmentStatus(item.shipmentId) !== 'SHIPMENT_SHIPPED'"
              (click)="shipShipment(item.shipmentId)">
              {{ 'COMMON.SHIP' | translate }}
            </button>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="picklistColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: picklistColumns"></tr>
      </table>
    </mat-card-content>
  </mat-card>
</ng-template>